<Window x:Class="projekt.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:projekt"
        mc:Ignorable="d"
        Title="Médialejátszó" 
        Height="400" 
        Width="300" 
        MinHeight="138"
        MinWidth="310"
        Topmost="True" 
        KeyDown="Window_KeyDown"
        KeyboardNavigation.TabNavigation="None"
        SnapsToDevicePixels="True">
    <Window.Resources>
        <RadialGradientBrush x:Key="Gradient" RadiusX="1" RadiusY="8" GradientOrigin="2,0">
            <GradientStop Color="{DynamicResource gradientColor1}" Offset="1"/>
            <GradientStop Color="{DynamicResource gradientColor2}" Offset="0"/>
        </RadialGradientBrush>

        <Color x:Key="gradientColor1" R="255" G="162" B="0" A="255"/>
        <Color x:Key="gradientColor2" R="166" G="0" B="255" A="255"/>

        <Color x:Key="themeColor_background" R="230" G="230" B="230" A="255"/>
        <Color x:Key="themeColor_menustrip" R="255" G="255" B="255" A="255"/>
        <Color x:Key="themeColor_controllerpanel" R="230" G="230" B="230" A="255"/>
        <Color x:Key="themeColor_progressbar" R="240" G="240" B="240" A="255"/>
        <Color x:Key="themeColor_text" R="0" G="0" B="0" A="255"/>

        <Image x:Key="play_light"   Source="play_light.png"   Margin="2.5,0,0,0"  Width="20"  Height="20" RenderOptions.BitmapScalingMode="Fant"/>
        <Image x:Key="pause_light"  Source="pause_light.png"  Margin="0,0,0,0"  Width="20"  Height="20" RenderOptions.BitmapScalingMode="Fant"/>
        <Image x:Key="stop_light"   Source="stop_light.png"   Margin="0,0,0,0"  Width="26"  Height="26" RenderOptions.BitmapScalingMode="Fant"/>
        <Image x:Key="play_dark"    Source="play_dark.png"    Margin="2.5,0,0,0"  Width="20"  Height="20" RenderOptions.BitmapScalingMode="Fant"/>
        <Image x:Key="pause_dark"   Source="pause_dark.png"   Margin="0,0,0,0"  Width="20"  Height="20" RenderOptions.BitmapScalingMode="Fant"/>
        <Image x:Key="stop_dark"    Source="stop_dark.png"    Margin="0,0,0,0"  Width="25"  Height="25" RenderOptions.BitmapScalingMode="Fant"/>

        <!--<Image Source="play_light.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="Fant" Margin="2,0,0,0"/>
                    Light               Dark
            bg:     (200,200,200)       (10,10,10)
            menu:   (230,230,230)       (23,23,23)
            panel:  (230,230,230)       (23,23,23)
            bar:    (255,255,255)       (0,0,0)
            button: (230,230,230)       (23,23,23)
            text:   (0,0,0)       (255,255,255)
        
        #ffa200 (255,162,0)
        #7300ff (166,0,255)
        
        -->
        <SolidColorBrush x:Key="ThemeColor_background" Color="{DynamicResource themeColor_background}"/>
        <SolidColorBrush x:Key="ThemeColor_menustrip" Color="{DynamicResource themeColor_menustrip}"/>
        <SolidColorBrush x:Key="ThemeColor_controllerpanel" Color="{DynamicResource themeColor_controllerpanel}"/>
        <SolidColorBrush x:Key="ThemeColor_progressbar" Color="{DynamicResource themeColor_progressbar}"/>
        <SolidColorBrush x:Key="ThemeColor_text" Color="{DynamicResource themeColor_text}"/>
        <SolidColorBrush x:Key="gradientColorEnd" Color="{DynamicResource gradientColor2}"/>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" 
                               VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsDefault" 
                          Value="True">
                                <Setter Property="Background" 
                           Value="Orange"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Focusable" Value="False"/>
        </Style>
        
        <Style x:Key="SliderRepeatButton" TargetType="{x:Type RepeatButton}">
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="IsTabStop" Value="false" />
            <Setter Property="Focusable" Value="false" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type RepeatButton}">
                        <Border Background="Gray" Height="5" CornerRadius="0,2,2,0"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SliderRepeatButton1" TargetType="{x:Type RepeatButton}">
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type RepeatButton}">
                        <Border SnapsToDevicePixels="True" Background="{DynamicResource Gradient}" Height="5" CornerRadius="2,0,0,2"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SliderThumb" TargetType="{x:Type Thumb}">
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Ellipse Height="15" Width="15" Fill="{DynamicResource ThemeColor_text}"></Ellipse>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ControlTemplate x:Key="Slider"  TargetType="{x:Type Slider}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" MinHeight="{TemplateBinding MinHeight}" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Track Grid.Row="1" x:Name="PART_Track"   >
                    <Track.DecreaseRepeatButton>
                        <RepeatButton Style="{StaticResource SliderRepeatButton1}"  Command="Slider.DecreaseLarge" />
                    </Track.DecreaseRepeatButton>
                    <Track.Thumb>
                        <Thumb Style="{StaticResource SliderThumb}"  />
                    </Track.Thumb>
                    <Track.IncreaseRepeatButton>
                        <RepeatButton Style="{StaticResource SliderRepeatButton}" Command="Slider.IncreaseLarge" />
                    </Track.IncreaseRepeatButton>
                </Track>
            </Grid>
        </ControlTemplate>

        <Style x:Key="Horizontal_Slider" TargetType="{x:Type Slider}">
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="OverridesDefaultStyle" Value="true" />
            <Style.Triggers>
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="MinHeight" Value="21" />
                    <Setter Property="MinWidth" Value="104" />
                    <Setter Property="Template" Value="{StaticResource Slider}" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Background="{DynamicResource ThemeColor_background}" AllowDrop="True" Drop="Grid_Drop" x:Name="grid">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <WrapPanel Height="20" VerticalAlignment="Top" Background="{DynamicResource ThemeColor_menustrip}" x:Name="menuStrip">
            <Button x:Name="filebtn"        Background="Transparent"    Foreground="{DynamicResource ThemeColor_text}"  Content="File"          Click="filebtn_Click"       BorderThickness="0"     Margin="3,0,10,0" />
            <Button x:Name="playlistbtn"    Background="Transparent"    Foreground="{DynamicResource ThemeColor_text}"  Content="Playlist"      Click="playlistbtn_Click"   BorderThickness="0" />
            <!-- Nincs kész -->
            <Button x:Name="themebtn"       Background="Transparent"    Foreground="{DynamicResource ThemeColor_text}"  Content="Dark theme"    Click="themebtn_Click"      BorderThickness="0"     Margin="10,0,10,0"  Height="20"   Tag="dark" />
            <Button x:Name="loopbtn"        Background="Transparent"    Foreground="{DynamicResource ThemeColor_text}"  Content="Loop"          Click="loopbtn_Click"       BorderThickness="0"     Margin="0,0,10,0"/>
            <Button x:Name="closebtn"       Background="Transparent"    Foreground="{DynamicResource ThemeColor_text}"  Content="Close"         Click="closebtn_Click"      BorderThickness="0" />
        </WrapPanel>
        <StackPanel x:Name="playlistPanel" Focusable="False" Width="200" Visibility="Hidden" Margin="0,20,0,20" HorizontalAlignment="Left" Panel.ZIndex="2" Opacity="0.95" Background="{DynamicResource ThemeColor_background}"/>
        <Button x:Name="removeMediaButton" Width="200" Height="20" Opacity="0.95" Visibility="Hidden" Click="removeFromPlaylist" Content="Törlés" Panel.ZIndex="2" HorizontalContentAlignment="Center" HorizontalAlignment="Left" VerticalAlignment="Bottom" BorderThickness="0" Background="{DynamicResource ThemeColor_background}" Foreground="{DynamicResource ThemeColor_text}"/>
        <MediaElement Margin="0,20,0,0" VerticalAlignment="Center" Stretch="Uniform" Volume="0.05" LoadedBehavior="Manual" x:Name="mediaPlayer"/>
        <StackPanel Focusable="False" Grid.Row="1" Background="{DynamicResource ThemeColor_menustrip}" x:Name="controllerPanel" MouseEnter="controllerPanel_MouseEnter" MouseLeave="controllerPanel_MouseLeave">
            <DockPanel Width="Auto">
                <Label x:Name="timeLabel" Width="110" Content="00:00:00/00:00:00" VerticalAlignment="Center" Foreground="{DynamicResource ThemeColor_text}"/>
                <ProgressBar x:Name="mediaPlayerProgress" 
                             Foreground="{DynamicResource Gradient}" 
                             Background="{DynamicResource ThemeColor_progressbar}" 
                             BorderThickness="0" Height="15" Margin="0,10,10,10" Width="Auto" VerticalAlignment="Center" MouseDown="mediaPlayerProgress_MouseDown" MouseMove="mediaPlayerProgress_MouseMove" MouseLeave="mediaPlayerProgress_MouseLeave" MouseUp="mediaPlayerProgress_MouseUp"/>
            </DockPanel>
            <DockPanel Margin="2,0,0,4" Width="Auto">
                <Button x:Name="playButton"     Background="Transparent" Foreground="{DynamicResource ThemeColor_text}" 
                        BorderBrush="{DynamicResource Gradient}" BorderThickness="3"
                        Width="40" Height="40" Margin="5,0,0,0"  
                        Click="playButton_Click"    MouseEnter="mouseEnter"     
                        MouseLeave="mouseLeave"
                        Content="{DynamicResource play_light}">
                    <Button.Resources>
                        <Style TargetType="{x:Type Border}">
                            <Setter Property="CornerRadius" Value="25"/>
                        </Style>
                    </Button.Resources>
                    
                </Button>

                <Button x:Name="pauseButton"    Background="Transparent" Foreground="{DynamicResource ThemeColor_text}" 
                        BorderBrush="{DynamicResource Gradient}" BorderThickness="3" 
                        Width="40" Height="40"  Click="pauseButton_Click"   
                        MouseEnter="mouseEnter"     MouseLeave="mouseLeave"     
                        Margin="10,0" Content="{DynamicResource pause_light}">
                    <Button.Resources>
                        <Style TargetType="{x:Type Border}">
                            <Setter Property="CornerRadius" Value="25"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <Button x:Name="stopButton"     Background="Transparent" Foreground="{DynamicResource ThemeColor_text}" 
                        BorderBrush="{DynamicResource Gradient}" BorderThickness="3" 
                        Width="40" Height="40"  Click="stopButton_Click"    
                        MouseEnter="mouseEnter"     MouseLeave="mouseLeave"
                        Content="{DynamicResource stop_light}">
                    <Button.Resources>
                        <Style TargetType="{x:Type Border}">
                            <Setter Property="CornerRadius" Value="25"/>
                        </Style>
                    </Button.Resources>
                </Button>
                <Slider x:Name="volumeSlider" Margin="0,0,10,0" Focusable="False" Value="50" Minimum="0" Maximum="100" Width="120" ValueChanged="volumeSlider_ValueChanged" Height="20" HorizontalAlignment="Right" BorderBrush="Transparent" Style="{StaticResource Horizontal_Slider}"/>


            </DockPanel>
        </StackPanel>
    </Grid>
</Window>
